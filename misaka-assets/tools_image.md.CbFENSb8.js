import{b as S,c as j,B as b,p as D}from"./chunks/theme.DZ0v2c6D.js";import{z as C,p as O,y as v,c as f,o as u,J as r,j as l,e as m,b as x,w as d,k as s,a as g,t as k,I as T}from"./chunks/framework.AZcU82rS.js";const z={class:"main-container"},P={class:"button-container"},V={key:0},E=["href"],J={key:1,class:"image-wrapper"},M=["src"],F={key:3,class:"button-container"},G={__name:"ImageUpload",setup(N){const i=v(""),o=v(""),a=v({}),p=v(!1),_=v(!1);C(i,t=>{localStorage.setItem("sign-username",t)}),C(o,t=>{localStorage.setItem("sign-password",t)}),O(()=>{i.value=localStorage.getItem("sign-username")||"",o.value=localStorage.getItem("sign-password")||""});const $=()=>{if(!i.value||!o.value){alert("请正确输入账号密码");return}p.value=!0,fetch(`/api/chaoxing/pan?username=${i.value}&password=${encodeURIComponent(o.value)}`,{method:"GET",credentials:"include"}).then(t=>t.json()).then(t=>{localStorage.setItem("pan-token",t._token),localStorage.setItem("pan-puid",t.puid),_.value=!0}).finally(()=>{p.value=!1})},B=()=>{const t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=e=>{const n=e.target.files[0];if(!n)return;const I=localStorage.getItem("pan-token"),h=localStorage.getItem("pan-puid");if(!I||!h)return;const y=new FormData;y.append("file",n),y.append("puid",h),fetch(`https://pan-yz.chaoxing.com/upload?_token=${I}`,{method:"POST",body:y}).then(c=>c.json()).then(c=>{const U={...c.data,code:`<img src="${c.data.previewUrl}" referrerpolicy="no-referrer" />`};a.value=U,console.info("上传图片",U,c)})},t.click()},w=t=>navigator.clipboard.writeText(t);return(t,e)=>(u(),f("div",z,[r(s(j),{vertical:""},{default:d(()=>[r(s(S),{value:i.value,"onUpdate:value":e[0]||(e[0]=n=>i.value=n),size:"large",disabled:p.value,type:"text",placeholder:"账号（手机号）"},null,8,["value","disabled"]),r(s(S),{value:o.value,"onUpdate:value":e[1]||(e[1]=n=>o.value=n),size:"large",type:"password",placeholder:"密码"},null,8,["value"])]),_:1}),l("div",P,[r(s(b),{type:"info",disabled:!_.value,onClick:B,class:"button"},{default:d(()=>[g(k(_.value?"上传图片":"登录后才能上传"),1)]),_:1},8,["disabled"]),_.value?m("",!0):(u(),x(s(b),{key:0,type:"primary",disabled:p.value,loading:p.value,onClick:$,class:"button"},{default:d(()=>[...e[4]||(e[4]=[g(" 登录账号 ",-1)])]),_:1},8,["disabled","loading"]))]),a.value.previewUrl?(u(),f("div",V,[l("div",null,"文件ID："+k(a.value.objectId),1),l("div",null,"文件名："+k(a.value.name),1),l("div",null,[e[5]||(e[5]=l("span",null,"图片链接：",-1)),l("a",{href:a.value.previewUrl,rel:"noreferrer",target:"_blank"},k(a.value.previewUrl),9,E)])])):m("",!0),a.value.previewUrl?(u(),f("div",J,[l("img",{referrerpolicy:"no-referrer",src:a.value.previewUrl,class:"image"},null,8,M)])):m("",!0),a.value.code?(u(),x(s(D),{key:2,code:a.value.code,"word-wrap":""},null,8,["code"])):m("",!0),a.value.previewUrl?(u(),f("div",F,[r(s(b),{type:"info",onClick:e[2]||(e[2]=n=>w(a.value.code)),class:"button"},{default:d(()=>[...e[6]||(e[6]=[g(" 复制 HTML ",-1)])]),_:1}),r(s(b),{type:"info",onClick:e[3]||(e[3]=n=>w(a.value.previewUrl)),class:"button"},{default:d(()=>[...e[7]||(e[7]=[g(" 复制链接 ",-1)])]),_:1})])):m("",!0)]))}},q=JSON.parse('{"title":"超星图床","description":"","frontmatter":{},"headers":[],"relativePath":"tools/image.md","filePath":"tools/image.md","lastUpdated":1766923980000}'),H={name:"tools/image.md"},A=Object.assign(H,{setup(N){return(i,o)=>{const a=T("ClientOnly");return u(),f("div",null,[o[0]||(o[0]=l("h1",{id:"超星图床",tabindex:"-1"},[g("超星图床 "),l("a",{class:"header-anchor",href:"#超星图床","aria-label":"Permalink to “超星图床”"},"​")],-1)),o[1]||(o[1]=l("div",{class:"tip custom-block"},[l("p",{class:"custom-block-title custom-block-title-default"},"提示"),l("p",null,"使用您的账号上传至超星图床，请确保图片符合超星云盘用户协议！")],-1)),r(a,null,{default:d(()=>[r(G)]),_:1})])}}});export{q as __pageData,A as default};
